<!doctype html>
<html lang="en">
<head>
  <title>Bicycle Wheel Designer</title>
  <meta name="javascripts" content="mindmup-editabletable.js, wheel-app.js" />
  <meta name="stylesheets" content="wheel-app.css" />
  <meta name="save_as" content="index.html" />
  <meta name="layout_fluid" content="true" />
</head>
<body>

<div class="row">
  <div class="col-md-4">

    <!-- Toolbar Navigation Tabs -->
    <ul class="nav nav-tabs nav-tabs" id="toolsTab" role="tablist">
      <li class="nav-item">
        <a class="nav-link p-1 px-2 active" id="tabRim" data-toggle="tab" href="#panelRim" role="tab" aria-controls="panelRim" aria-selected="true">Rim</a>
      </li>
      <li class="nav-item">
        <a class="nav-link p-1 px-2" id="tabHub" data-toggle="tab" href="#panelHub" role="tab" aria-controls="panelHub" aria-selected="false">Hub</a>
      </li>
      <li class="nav-item">
        <a class="nav-link p-1 px-2" id="tabSpokes" data-toggle="tab" href="#panelSpokes" role="tab" aria-controls="panelSpokes" aria-selected="false">Spokes</a>
      </li>
      <li class="nav-item">
        <a class="nav-link p-1 px-2" id="tabForces" data-toggle="tab" href="#panelForces" role="tab" aria-controls="panelForces" aria-selected="false">Forces</a>
      </li>
    </ul>

    <div class="tab-content" id="toolsContents">

      <!-- RIM TOOLBAR -->
      <div class="tab-pane fade show active py-2" id="panelRim" role="tabpanel" aria-labelledby="tabRim">

        <form id="formRim">

          <div class="form-group form-group-sm">
            <label for="rimPreset"><strong>Choose a pre-defined rim:</strong></label>
            <select class="form-control form-control-sm" name="rimPreset" id="rimPreset">
              <option>Custom</option>
            </select>
          </div>

          <div class="form-group form-group-sm">
            <label for="rimSize"><strong>or define a custom rim:</strong></label>
            <select class="form-control form-control-sm rim-input" name="rimSize" id="rimSize"></select>

            <select class="form-control form-control-sm rim-input" name="rimMatl" id="rimMatl"></select>

            <label for="rimMass">Mass [grams]:&nbsp;</label><span><strong>540</strong></span>
            <input type="range" class="form-control-range custom-range update-range rim-input" name="rimMass" id="rimMass" min="10" step="10" max="2000" value="540">

            <label for="rimRadStiff">Radial stiffness [N-m<sup>2</sup>]:&nbsp;</label><span><strong>110</strong></span>
            <input type="range" class="form-control-range custom-range update-range rim-input" name="rimRadStiff" id="rimRadStiff" min="10" max="1000" step="10" value="110">

            <label for="rimLatStiff">Lateral stiffness [N-m<sup>2</sup>]:&nbsp;</label><span><strong>220</strong></span>
            <input type="range" class="form-control-range custom-range update-range rim-input" name="rimLatStiff" id="rimLatStiff" min="10" max="500" step="10" value="220">

            <label for="rimTorStiff">Torsional stiffness [N-m<sup>2</sup>]:&nbsp;</label><span><strong>25</strong></span>
            <input type="range" class="form-control-range custom-range update-range rim-input" name="rimTorStiff" id="rimTorStiff" min="5" max="200" step="5" value="25">
          </div>

        </form>

      </div>

      <!-- HUB TOOLBAR -->
      <div class="tab-pane fade py-2" id="panelHub" role="tabpanel" aria-labelledby="tabHub">

        <form id="formHub">

          <div class="form-group form-group-sm">
            <label>Rim-to-flange distance [mm]:</label>

            <div class="form-check form-group-sm">
              <input class="form-check-input" type="checkbox" value="" id="hubSymm" checked>
              <label class="form-check-label" for="hubSymm">Symmetric</label>
            </div>

            <div class="form-row">
              <div class="col-6">
                <span>Left:&nbsp;</span><span id="hubWidthLeft_label"><strong>25</strong></span>
              </div>
              <div class="col-6">
                <span>Right:&nbsp;</span><span id="hubWidthRight_label"><strong>25</strong></span>
              </div>
            </div>
          </div>

          <div class="form-group form-group-sm form-row">
            <div class="col-6 hub-slider-left">
              <input type="range" class="form-control-range custom-range" name="hubWidthLeft" id="hubWidthLeft" min="-50" max="-1" step="1" value="-25">
            </div>
            <div class="col-6 hub-slider-right">
              <input type="range" class="form-control-range custom-range" name="hubWidthRight" id="hubWidthRight" min="1" max="50" step="1" value="25">
            </div>
          </div>

          <div class="form-group form-group-sm">
            <label for="hubDiameter">Flange diameter [mm]:&nbsp;</label><span><strong>50</strong></span>
            <input type="range" class="form-control-range custom-range update-range" name="hubDiameter" id="hubDiameter" min="0" max="100" value="50">
          </div>

        </form>

      </div>

      <!-- SPOKES TOOLBAR -->
      <div class="tab-pane fade py-2" id="panelSpokes" role="tabpanel" aria-labelledby="tabSpokes">

        <div class="form-group form-group-sm">
          <label for="spkNum">Number of spokes:&nbsp;</label><span><strong>36</strong></span>
          <input type="range" class="form-control-range custom-range update-range" name="spkNum" id="spkNum" min="4" max="64" step="2" value="36">
        </div>

        <hr/>

        <form id="formSpokesDS">
          <div class="form-group form-group-sm">
            <strong>Drive-side spokes</strong>

            <select class="form-control form-control-sm spokes-ds" name="spkPattern" id="spkPattern">
              <option>Radial</option>
              <option>1-cross</option>
              <option>2-cross</option>
              <option selected>3-cross</option>
              <option>4-cross</option>
            </select>
          </div>

          <div class="form-group">
            <select class="form-control form-control-sm spokes-ds" name="spkMatl" id="spkMatl"></select>
          </div>

          <div class="form-group form-group-sm">
            <label for="spkDiamDS">Diameter [mm]:&nbsp;</label><span><strong>2</strong></span>
            <input type="range" class="form-control-range custom-range update-range spokes-ds" name="spkDiam" id="spkDiam" min="0.1", max="3" step="0.1" value="2">

            <label for="spkTensDS">Tension [kgf]:&nbsp;</label><span><strong>80</strong></span>
            <input type="range" class="form-control-range custom-range update-range" name="spkTens" id="spkTens" min="0" max="200" step="5" value="80">
          </div>
        </form>

        <hr/>

        <div class="form-group-sm"><strong>Non-drive-side spokes</strong></div>

        <div class="form-check form-group-sm">
          <input class="form-check-input" type="checkbox" value="" id="spkNDSSame" checked>
          <label class="form-check-label" for="spkNDSSame">Same as drive-side</label>
        </div>

        <div class="collapse" id="spkNDSPanel">

          <form id="formSpokesNDS">
            <div class="form-group">
              <select class="form-control form-control-sm" name="spkPattern" id="spkPatternNDS">
                <option>Radial</option>
                <option>1-cross</option>
                <option>2-cross</option>
                <option selected>3-cross</option>
                <option>4-cross</option>
              </select>
            </div>

            <div class="form-group">
              <select class="form-control form-control-sm" name="spkMatl" id="spkMatlNDS"></select>
            </div>

            <div class="form-group form-group-sm">
              <label for="spkDiamNDS">Diameter [mm]&nbsp;</label><span><strong>2</strong></span>
              <input type="range" class="form-control-range custom-range update-range" name="spkDiam" id="spkDiamNDS" min="0.1", max="3" step="0.1" value="2">

              <label for="spkTensNDS">Tension [kgf]:&nbsp;</label><span><strong>80</strong></span>
              <input type="range" class="form-control-range custom-range update-range" name="spkTens" id="spkTensNDS" min="0" max="200" step="5" value="80">
            </div>
          </form>

        </div>

      </div>

      <!-- FORCES TOOLBAR -->
      <div class="tab-pane fade py-2" id="panelForces" role="tabpanel" aria-labelledby="tabForces">

        <p>Choose from force presets, or add forces manually in the table below. Click on any cell to edit.</p>

        <div class="dropdown show my-2">
          <a class="btn btn-primary btn-sm dropdown-toggle" href="#" role="button" id="forcePreset" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Add a force scenario
          </a>
          <div class="dropdown-menu" id="forcePresetDropdown" aria-labelledby="forcePreset"></div>
        </div>

        <table class="table table-striped table-hover table-sm" id="tableForces">
          <tr><th>Type</th><th>Loc. [deg]</th><th>Mag. [kgf]</th><th></th></tr>
          <tr><th class="force-type text-nowrap">Radial <i class="fas fa-angle-double-down"></i></th><td>0</td><td>50</td><th><a class="remove-row" href="#"><i class="fas fa-trash-alt"></i></a></th></tr>
          <tr><th colspan="3">Add a force</th><th><a class="add-force" href="#"><i class="fas fa-plus-circle"></i></a></th></tr>
        </table>

        <hr/>
        <p>Adjust (tighten or loosen) individual spokes. Positive=tighter, negative=looser.</p>

        <table class="table table-striped table-hover table-sm" id="tableAdjust">
          <tr><th>Spoke number</th><th>Number of turns</th><th></th></tr>
          <tr><td>0</td><td>0</td><th><a class="remove-row" href="#"><i class="fas fa-trash-alt"></i></a></th></tr>
          <tr><th colspan="2">Adjust another spoke</th><th><a class="add-adjust" href="#"><i class="fas fa-plus-circle"></i></a></th></tr>
        </table>

      </div>

      <div class="form-group">
        <button type="button" id="btnPressMe" class="btn btn-success btn-block">Calculate</button>
      </div>

    </div>

  </div>
  <div class="col-md-8">

    <!-- Results navigation tabs -->
    <ul class="nav nav-tabs" id="resultsTab" role="tablist">
      <li class="nav-item">
        <a class="nav-link p-1 px-2 result-navs active" id="plots-tab" data-toggle="tab" href="#resultPlots" role="tab" aria-controls="resultPlots" aria-selected="true">Tensions</a>
      </li>
      <li class="nav-item">
        <a class="nav-link p-1 px-2 result-navs" id="deform-tab" data-toggle="tab" href="#resultDeform" role="tab" aria-controls="resultDeform" aria-selected="true">Deformation</a>
      </li>
      <li class="nav-item">
        <a class="nav-link p-1 px-2 result-navs" id="results-tab" data-toggle="tab" href="#resultSummary" role="tab" aria-controls="resultSummary" aria-selected="false">Summary</a>
      </li>
    </ul>

    <div id="alerts"></div>
    <div class="tab-content" id="resultsContents">

      <!-- Results: Plots -->
      <div class="tab-pane fade show active py-2" id="resultPlots" role="tabpanel" aria-labelledby="plots-tab">
        <div id="tension-plot"></div>
      </div>

      <!-- Results: Deformation -->
      <div class="tab-pane fade py-2" id="resultDeform" role="tabpanel" aria-labelledby="plots-tab">

        <div class="form-row">
          <div class="col-sm-6">
                <button type="button" id="deformRadial" class="btn btn-sm btn-primary deform-button active">
                Radial
              </button>
              <button type="button" id="deformLateral" class="btn btn-sm btn-primary deform-button">
                Lateral
              </button>
              <button type="button" id="deformTwist" class="btn btn-sm btn-primary deform-button">
                Twist
              </button>
          </div>
          <div class="col-sm-6">
            <div class="form-group form-group-sm">
              <label for="scaleFactor">Scale factor:&nbsp;</label><span><strong>20%</strong></span>
              <input type="range" class="form-control-range custom-range update-range" id="scaleFactor" min="1" max="100" step="1" value="20">
            </div>
          </div>
        </div>

        <div id="deform-plot"></div>

      </div>

      <!-- Results: Summary -->
      <div class="tab-pane fade py-2" id="resultSummary" role="tabpanel" aria-labelledby="results-tab">

        <h6>Mass Properties (without hub):</h6>
        <table class="table table-sm table-hover">
          <tr><th>Mass</th><td id="sumMassGrams">-</td><td id="sumMassLbs">-</td></tr>
          <tr><th>Eff. Rotating mass</th><td id="sumMassRotGrams">-</td><td id="sumMassRotLbs">-</td></tr>
        </table>

        <h6>Stiffness</h6>
        <table class="table table-sm table-hover">
          <tr><th>Radial stiffness</th><td id="sumStiffRadSI">-</td><td id="sumStiffRadLbs">-</td></tr>
          <tr><th>Lateral stiffness</th><td id="sumStiffLatSI">-</td><td id="sumStiffLatLbs">-</td></tr>
          <tr><th>Torsional stiffness</th><td id="sumStiffTorSI">-</td><td id="sumStiffTorLbs">-</td></tr>
        </table>

        <h6>Spoke tension</h6>
        <table class="table table-sm table-hover">
          <tr><th>Drive-side tension</th><td id="sumTensDSSI">-</td><td id="sumTensDSLbs">-</td></tr>
          <tr><th>Non-drive-side tension</th><td id="sumTensNDSSI">-</td><td id="sumTensNDSLbs">-</td></tr>
          <tr><th>Average tension</th><td id="sumTensAvgSI">-</td><td id="sumTensAvgLbs">-</td></tr>
          <tr><th>Maximum average tension</th><td id="sumTensMaxSI">-</td><td id="sumTensMaxLbs">-</td></tr>
        </table>

        <h6>Strength</h6>
        <table class="table table-sm table-hover">
          <tr><th>Lateral force to buckle spokes</th><td id="sumForceLatSI">-</td><td id="sumForceLatLbs">-</td></tr>
          <tr><th>Radial force to buckle spokes</th><td id="sumForceRadSI">-</td><td id="sumForceRadLbs">-</td></tr>
        </table>

      </div>
    </div>
  </div>

</div>

</body>
</html>